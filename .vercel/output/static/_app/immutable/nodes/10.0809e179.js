import{r as G}from"../chunks/index.ade5cbd2.js";import{S as J,i as L,s as M,a as v,k as N,y as b,a0 as R,h as i,c as k,l as V,m as F,z as d,n as K,b as p,A as w,G as Q,g as _,d as g,B as h,q as D,r as T,v as U,f as W,a3 as X,u as E}from"../chunks/index.6c4b92a0.js";import{a as Y}from"../chunks/navigation.2d7902d0.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.880982d3.js";import{H as Z,B as C}from"../chunks/Heading.24a0ab99.js";import{B as y}from"../chunks/ButtonGroup.a7422762.js";import{T as x,a as ee,b as te,c as q,d as z,e as B}from"../chunks/TableHeadCell.76c9c9be.js";import{A as $e}from"../chunks/A.ad84c374.js";const ne=async({parent:f})=>{const{supabase:e,session:$}=await f();if(!$)throw G(303,"/admin/login");const{data:t}=await e.from("users").select("*").eq("id",$.user.id).single();(t==null?void 0:t.role)!="admin"&&await e.auth.signOut();const{data:s}=await e.from("announcement").select("*");return{session:$,announcementsData:s}},ze=Object.freeze(Object.defineProperty({__proto__:null,load:ne},Symbol.toStringTag,{value:"Module"}));function O(f,e,$){const t=f.slice();return t[4]=e[$],t}function le(f){let e;return{c(){e=D("Dashboard Pengumuman")},l($){e=T($,"Dashboard Pengumuman")},m($,t){p($,e,t)},d($){$&&i(e)}}}function ae(f){let e;return{c(){e=D("ID")},l($){e=T($,"ID")},m($,t){p($,e,t)},d($){$&&i(e)}}}function se(f){let e;return{c(){e=D("Judul")},l($){e=T($,"Judul")},m($,t){p($,e,t)},d($){$&&i(e)}}}function fe(f){let e;return{c(){e=D("Isi")},l($){e=T($,"Isi")},m($,t){p($,e,t)},d($){$&&i(e)}}}function re(f){let e;return{c(){e=D("Tanggal")},l($){e=T($,"Tanggal")},m($,t){p($,e,t)},d($){$&&i(e)}}}function oe(f){let e;return{c(){e=D("Aksi")},l($){e=T($,"Aksi")},m($,t){p($,e,t)},d($){$&&i(e)}}}function ue(f){let e,$,t,s,l,o,a,u,m,c;return e=new q({props:{$$slots:{default:[ae]},$$scope:{ctx:f}}}),t=new q({props:{$$slots:{default:[se]},$$scope:{ctx:f}}}),l=new q({props:{$$slots:{default:[fe]},$$scope:{ctx:f}}}),a=new q({props:{$$slots:{default:[re]},$$scope:{ctx:f}}}),m=new q({props:{$$slots:{default:[oe]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),$=v(),b(t.$$.fragment),s=v(),b(l.$$.fragment),o=v(),b(a.$$.fragment),u=v(),b(m.$$.fragment)},l(n){d(e.$$.fragment,n),$=k(n),d(t.$$.fragment,n),s=k(n),d(l.$$.fragment,n),o=k(n),d(a.$$.fragment,n),u=k(n),d(m.$$.fragment,n)},m(n,r){w(e,n,r),p(n,$,r),w(t,n,r),p(n,s,r),w(l,n,r),p(n,o,r),w(a,n,r),p(n,u,r),w(m,n,r),c=!0},p(n,r){const P={};r&128&&(P.$$scope={dirty:r,ctx:n}),e.$set(P);const I={};r&128&&(I.$$scope={dirty:r,ctx:n}),t.$set(I);const A={};r&128&&(A.$$scope={dirty:r,ctx:n}),l.$set(A);const H={};r&128&&(H.$$scope={dirty:r,ctx:n}),a.$set(H);const S={};r&128&&(S.$$scope={dirty:r,ctx:n}),m.$set(S)},i(n){c||(_(e.$$.fragment,n),_(t.$$.fragment,n),_(l.$$.fragment,n),_(a.$$.fragment,n),_(m.$$.fragment,n),c=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),g(l.$$.fragment,n),g(a.$$.fragment,n),g(m.$$.fragment,n),c=!1},d(n){h(e,n),n&&i($),h(t,n),n&&i(s),h(l,n),n&&i(o),h(a,n),n&&i(u),h(m,n)}}}function me(f){let e=f[4].id+"",$;return{c(){$=D(e)},l(t){$=T(t,e)},m(t,s){p(t,$,s)},p(t,s){s&1&&e!==(e=t[4].id+"")&&E($,e)},d(t){t&&i($)}}}function ce(f){let e=f[4].title+"",$;return{c(){$=D(e)},l(t){$=T(t,e)},m(t,s){p(t,$,s)},p(t,s){s&1&&e!==(e=t[4].title+"")&&E($,e)},d(t){t&&i($)}}}function ie(f){let e=f[4].content.slice(0,50)+"...",$;return{c(){$=D(e)},l(t){$=T(t,e)},m(t,s){p(t,$,s)},p(t,s){s&1&&e!==(e=t[4].content.slice(0,50)+"...")&&E($,e)},d(t){t&&i($)}}}function pe(f){let e=new Date(f[4].created_at).toLocaleDateString("id-ID")+"",$;return{c(){$=D(e)},l(t){$=T(t,e)},m(t,s){p(t,$,s)},p(t,s){s&1&&e!==(e=new Date(t[4].created_at).toLocaleDateString("id-ID")+"")&&E($,e)},d(t){t&&i($)}}}function _e(f){let e;return{c(){e=D("Edit")},l($){e=T($,"Edit")},m($,t){p($,e,t)},d($){$&&i(e)}}}function ge(f){let e;return{c(){e=D("Hapus")},l($){e=T($,"Hapus")},m($,t){p($,e,t)},d($){$&&i(e)}}}function be(f){let e,$,t,s;e=new C({props:{color:"blue",target:"_blank",href:"/dashboard/announcements/"+f[4].id,$$slots:{default:[_e]},$$scope:{ctx:f}}});function l(){return f[3](f[4])}return t=new C({props:{color:"red",$$slots:{default:[ge]},$$scope:{ctx:f}}}),t.$on("click",l),{c(){b(e.$$.fragment),$=v(),b(t.$$.fragment)},l(o){d(e.$$.fragment,o),$=k(o),d(t.$$.fragment,o)},m(o,a){w(e,o,a),p(o,$,a),w(t,o,a),s=!0},p(o,a){f=o;const u={};a&1&&(u.href="/dashboard/announcements/"+f[4].id),a&128&&(u.$$scope={dirty:a,ctx:f}),e.$set(u);const m={};a&128&&(m.$$scope={dirty:a,ctx:f}),t.$set(m)},i(o){s||(_(e.$$.fragment,o),_(t.$$.fragment,o),s=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),s=!1},d(o){h(e,o),o&&i($),h(t,o)}}}function de(f){let e,$;return e=new y({props:{$$slots:{default:[be]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,s){w(e,t,s),$=!0},p(t,s){const l={};s&129&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){$||(_(e.$$.fragment,t),$=!0)},o(t){g(e.$$.fragment,t),$=!1},d(t){h(e,t)}}}function we(f){let e,$,t,s,l,o,a,u,m,c;return e=new B({props:{$$slots:{default:[me]},$$scope:{ctx:f}}}),t=new B({props:{$$slots:{default:[ce]},$$scope:{ctx:f}}}),l=new B({props:{$$slots:{default:[ie]},$$scope:{ctx:f}}}),a=new B({props:{$$slots:{default:[pe]},$$scope:{ctx:f}}}),m=new B({props:{$$slots:{default:[de]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),$=v(),b(t.$$.fragment),s=v(),b(l.$$.fragment),o=v(),b(a.$$.fragment),u=v(),b(m.$$.fragment)},l(n){d(e.$$.fragment,n),$=k(n),d(t.$$.fragment,n),s=k(n),d(l.$$.fragment,n),o=k(n),d(a.$$.fragment,n),u=k(n),d(m.$$.fragment,n)},m(n,r){w(e,n,r),p(n,$,r),w(t,n,r),p(n,s,r),w(l,n,r),p(n,o,r),w(a,n,r),p(n,u,r),w(m,n,r),c=!0},p(n,r){const P={};r&129&&(P.$$scope={dirty:r,ctx:n}),e.$set(P);const I={};r&129&&(I.$$scope={dirty:r,ctx:n}),t.$set(I);const A={};r&129&&(A.$$scope={dirty:r,ctx:n}),l.$set(A);const H={};r&129&&(H.$$scope={dirty:r,ctx:n}),a.$set(H);const S={};r&129&&(S.$$scope={dirty:r,ctx:n}),m.$set(S)},i(n){c||(_(e.$$.fragment,n),_(t.$$.fragment,n),_(l.$$.fragment,n),_(a.$$.fragment,n),_(m.$$.fragment,n),c=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),g(l.$$.fragment,n),g(a.$$.fragment,n),g(m.$$.fragment,n),c=!1},d(n){h(e,n),n&&i($),h(t,n),n&&i(s),h(l,n),n&&i(o),h(a,n),n&&i(u),h(m,n)}}}function j(f){let e,$;return e=new z({props:{$$slots:{default:[we]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,s){w(e,t,s),$=!0},p(t,s){const l={};s&129&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){$||(_(e.$$.fragment,t),$=!0)},o(t){g(e.$$.fragment,t),$=!1},d(t){h(e,t)}}}function he(f){let e;return{c(){e=D("Tambahkan Pengumuman")},l($){e=T($,"Tambahkan Pengumuman")},m($,t){p($,e,t)},d($){$&&i(e)}}}function ve(f){let e,$;return e=new C({props:{$$slots:{default:[he]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,s){w(e,t,s),$=!0},p(t,s){const l={};s&128&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){$||(_(e.$$.fragment,t),$=!0)},o(t){g(e.$$.fragment,t),$=!1},d(t){h(e,t)}}}function ke(f){let e,$;return e=new $e({props:{href:"/dashboard/announcements/create",target:"_blank",$$slots:{default:[ve]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment)},l(t){d(e.$$.fragment,t)},m(t,s){w(e,t,s),$=!0},p(t,s){const l={};s&128&&(l.$$scope={dirty:s,ctx:t}),e.$set(l)},i(t){$||(_(e.$$.fragment,t),$=!0)},o(t){g(e.$$.fragment,t),$=!1},d(t){h(e,t)}}}function De(f){let e,$,t,s,l,o,a,u,m,c;return e=new B({}),t=new B({}),l=new B({}),a=new B({}),m=new B({props:{$$slots:{default:[ke]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),$=v(),b(t.$$.fragment),s=v(),b(l.$$.fragment),o=v(),b(a.$$.fragment),u=v(),b(m.$$.fragment)},l(n){d(e.$$.fragment,n),$=k(n),d(t.$$.fragment,n),s=k(n),d(l.$$.fragment,n),o=k(n),d(a.$$.fragment,n),u=k(n),d(m.$$.fragment,n)},m(n,r){w(e,n,r),p(n,$,r),w(t,n,r),p(n,s,r),w(l,n,r),p(n,o,r),w(a,n,r),p(n,u,r),w(m,n,r),c=!0},p(n,r){const P={};r&128&&(P.$$scope={dirty:r,ctx:n}),m.$set(P)},i(n){c||(_(e.$$.fragment,n),_(t.$$.fragment,n),_(l.$$.fragment,n),_(a.$$.fragment,n),_(m.$$.fragment,n),c=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),g(l.$$.fragment,n),g(a.$$.fragment,n),g(m.$$.fragment,n),c=!1},d(n){h(e,n),n&&i($),h(t,n),n&&i(s),h(l,n),n&&i(o),h(a,n),n&&i(u),h(m,n)}}}function Te(f){let e,$,t,s=f[0],l=[];for(let a=0;a<s.length;a+=1)l[a]=j(O(f,s,a));const o=a=>g(l[a],1,1,()=>{l[a]=null});return $=new z({props:{$$slots:{default:[De]},$$scope:{ctx:f}}}),{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=v(),b($.$$.fragment)},l(a){for(let u=0;u<l.length;u+=1)l[u].l(a);e=k(a),d($.$$.fragment,a)},m(a,u){for(let m=0;m<l.length;m+=1)l[m]&&l[m].m(a,u);p(a,e,u),w($,a,u),t=!0},p(a,u){if(u&3){s=a[0];let c;for(c=0;c<s.length;c+=1){const n=O(a,s,c);l[c]?(l[c].p(n,u),_(l[c],1)):(l[c]=j(n),l[c].c(),_(l[c],1),l[c].m(e.parentNode,e))}for(U(),c=s.length;c<l.length;c+=1)o(c);W()}const m={};u&128&&(m.$$scope={dirty:u,ctx:a}),$.$set(m)},i(a){if(!t){for(let u=0;u<s.length;u+=1)_(l[u]);_($.$$.fragment,a),t=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);g($.$$.fragment,a),t=!1},d(a){X(l,a),a&&i(e),h($,a)}}}function Be(f){let e,$,t,s;return e=new ee({props:{$$slots:{default:[ue]},$$scope:{ctx:f}}}),t=new te({props:{$$slots:{default:[Te]},$$scope:{ctx:f}}}),{c(){b(e.$$.fragment),$=v(),b(t.$$.fragment)},l(l){d(e.$$.fragment,l),$=k(l),d(t.$$.fragment,l)},m(l,o){w(e,l,o),p(l,$,o),w(t,l,o),s=!0},p(l,o){const a={};o&128&&(a.$$scope={dirty:o,ctx:l}),e.$set(a);const u={};o&129&&(u.$$scope={dirty:o,ctx:l}),t.$set(u)},i(l){s||(_(e.$$.fragment,l),_(t.$$.fragment,l),s=!0)},o(l){g(e.$$.fragment,l),g(t.$$.fragment,l),s=!1},d(l){h(e,l),l&&i($),h(t,l)}}}function Pe(f){let e,$,t,s,l,o;return t=new Z({props:{tag:"h3",class:"mb-6",$$slots:{default:[le]},$$scope:{ctx:f}}}),l=new x({props:{tiled:!0,$$slots:{default:[Be]},$$scope:{ctx:f}}}),{c(){e=v(),$=N("div"),b(t.$$.fragment),s=v(),b(l.$$.fragment),this.h()},l(a){R("svelte-1merx10",document.head).forEach(i),e=k(a),$=V(a,"DIV",{class:!0});var m=F($);d(t.$$.fragment,m),s=k(m),d(l.$$.fragment,m),m.forEach(i),this.h()},h(){document.title="Dashboard Pengumuman",K($,"class","ml-10 mt-5 w-3/4")},m(a,u){p(a,e,u),p(a,$,u),w(t,$,null),Q($,s),w(l,$,null),o=!0},p(a,[u]){const m={};u&128&&(m.$$scope={dirty:u,ctx:a}),t.$set(m);const c={};u&129&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){o||(_(t.$$.fragment,a),_(l.$$.fragment,a),o=!0)},o(a){g(t.$$.fragment,a),g(l.$$.fragment,a),o=!1},d(a){a&&i(e),a&&i($),h(t),h(l)}}}function Ie(f,e,$){let t,{data:s}=e;async function l(a){await s.supabase.from("announcement").delete().eq("id",a),Y(),alert("Pengumuman berhasil dihapus!")}const o=a=>l(a.id);return f.$$set=a=>{"data"in a&&$(2,s=a.data)},f.$$.update=()=>{f.$$.dirty&4&&$(0,{announcementsData:t}=s,t)},[t,l,s,o]}class Ge extends J{constructor(e){super(),L(this,e,Ie,Pe,M,{data:2})}}export{Ge as component,ze as universal};
