import{r as ae}from"../chunks/index.ade5cbd2.js";import{S as ne,i as se,s as re,w as Y,a1 as Z,a as j,k as V,y as b,a0 as oe,h as i,c as K,l as H,m as J,z as v,n as L,b as O,A as w,G as _,a2 as x,g as B,d as k,B as P,q as A,r as D}from"../chunks/index.6c4b92a0.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.880982d3.js";import{H as le,B as ue}from"../chunks/Heading.24a0ab99.js";import{L as y,I as ie}from"../chunks/Input.9594bbd1.js";import{T as me}from"../chunks/Textarea.109c781b.js";import{A as fe}from"../chunks/A.ad84c374.js";import{P as $e}from"../chunks/P.dfcfc9c9.js";const ce=async({parent:s})=>{const{supabase:t,session:e}=await s();if(!e)throw ae(303,"/admin/login");const{data:a}=await t.from("users").select("*").eq("id",e.user.id).single();return(a==null?void 0:a.role)!="admin"&&await t.auth.signOut(),{adminData:a}},Oe=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));function de(s){let t;return{c(){t=A("Kembali ke dashboard pengumuman")},l(e){t=D(e,"Kembali ke dashboard pengumuman")},m(e,a){O(e,t,a)},d(e){e&&i(t)}}}function pe(s){let t,e;return t=new $e({props:{color:"blue",$$slots:{default:[de]},$$scope:{ctx:s}}}),{c(){b(t.$$.fragment)},l(a){v(t.$$.fragment,a)},m(a,u){w(t,a,u),e=!0},p(a,u){const r={};u&128&&(r.$$scope={dirty:u,ctx:a}),t.$set(r)},i(a){e||(B(t.$$.fragment,a),e=!0)},o(a){k(t.$$.fragment,a),e=!1},d(a){P(t,a)}}}function _e(s){let t;return{c(){t=A("Buat Pengumuman Baru")},l(e){t=D(e,"Buat Pengumuman Baru")},m(e,a){O(e,t,a)},d(e){e&&i(t)}}}function ge(s){let t;return{c(){t=A("Judul")},l(e){t=D(e,"Judul")},m(e,a){O(e,t,a)},d(e){e&&i(t)}}}function he(s){let t;return{c(){t=A("Konten")},l(e){t=D(e,"Konten")},m(e,a){O(e,t,a)},d(e){e&&i(t)}}}function be(s){let t;return{c(){t=A("Simpan")},l(e){t=D(e,"Simpan")},m(e,a){O(e,t,a)},d(e){e&&i(t)}}}function ve(s){let t,e,a,u,r,z,f,$,o,q,c,M,C,g,h,F,d,G,R,p,T;a=new fe({props:{class:"mb-3 mt-6",href:"/dashboard/announcements",$$slots:{default:[pe]},$$scope:{ctx:s}}}),r=new le({props:{tag:"h3",class:"mb-6",$$slots:{default:[_e]},$$scope:{ctx:s}}}),o=new y({props:{for:"judul",class:"mb-2",$$slots:{default:[ge]},$$scope:{ctx:s}}});function ee(n){s[4](n)}let N={id:"judul"};s[0]!==void 0&&(N.value=s[0]),c=new ie({props:N}),Y.push(()=>Z(c,"value",ee)),h=new y({props:{for:"konten",class:"mb-2",$$slots:{default:[he]},$$scope:{ctx:s}}});function te(n){s[5](n)}let Q={rows:"15",id:"konten"};return s[1]!==void 0&&(Q.value=s[1]),d=new me({props:Q}),Y.push(()=>Z(d,"value",te)),p=new ue({props:{class:"mb-6",color:"blue",$$slots:{default:[be]},$$scope:{ctx:s}}}),p.$on("click",s[2]),{c(){t=j(),e=V("form"),b(a.$$.fragment),u=j(),b(r.$$.fragment),z=j(),f=V("div"),$=V("div"),b(o.$$.fragment),q=j(),b(c.$$.fragment),C=j(),g=V("div"),b(h.$$.fragment),F=j(),b(d.$$.fragment),R=j(),b(p.$$.fragment),this.h()},l(n){oe("svelte-r8mdzu",document.head).forEach(i),t=K(n),e=H(n,"FORM",{class:!0});var m=J(e);v(a.$$.fragment,m),u=K(m),v(r.$$.fragment,m),z=K(m),f=H(m,"DIV",{class:!0});var S=J(f);$=H(S,"DIV",{class:!0});var E=J($);v(o.$$.fragment,E),q=K(E),v(c.$$.fragment,E),E.forEach(i),C=K(S),g=H(S,"DIV",{class:!0});var I=J(g);v(h.$$.fragment,I),F=K(I),v(d.$$.fragment,I),I.forEach(i),S.forEach(i),R=K(m),v(p.$$.fragment,m),m.forEach(i),this.h()},h(){document.title="Buat Pengumuman Baru",L($,"class","mb-3"),L(g,"class","mb-3"),L(f,"class","grid mb-6"),L(e,"class","ml-10 w-3/4")},m(n,l){O(n,t,l),O(n,e,l),w(a,e,null),_(e,u),w(r,e,null),_(e,z),_(e,f),_(f,$),w(o,$,null),_($,q),w(c,$,null),_(f,C),_(f,g),w(h,g,null),_(g,F),w(d,g,null),_(e,R),w(p,e,null),T=!0},p(n,[l]){const m={};l&128&&(m.$$scope={dirty:l,ctx:n}),a.$set(m);const S={};l&128&&(S.$$scope={dirty:l,ctx:n}),r.$set(S);const E={};l&128&&(E.$$scope={dirty:l,ctx:n}),o.$set(E);const I={};!M&&l&1&&(M=!0,I.value=n[0],x(()=>M=!1)),c.$set(I);const U={};l&128&&(U.$$scope={dirty:l,ctx:n}),h.$set(U);const W={};!G&&l&2&&(G=!0,W.value=n[1],x(()=>G=!1)),d.$set(W);const X={};l&128&&(X.$$scope={dirty:l,ctx:n}),p.$set(X)},i(n){T||(B(a.$$.fragment,n),B(r.$$.fragment,n),B(o.$$.fragment,n),B(c.$$.fragment,n),B(h.$$.fragment,n),B(d.$$.fragment,n),B(p.$$.fragment,n),T=!0)},o(n){k(a.$$.fragment,n),k(r.$$.fragment,n),k(o.$$.fragment,n),k(c.$$.fragment,n),k(h.$$.fragment,n),k(d.$$.fragment,n),k(p.$$.fragment,n),T=!1},d(n){n&&i(t),n&&i(e),P(a),P(r),P(o),P(c),P(h),P(d),P(p)}}}function we(s,t,e){let{data:a}=t,u,r;async function z(){const{announcementData:o,error:q}=await a.supabase.from("announcement").insert({title:u,content:r});q?console.log(q):(alert("Pengumuman berhasil dibuat!"),window.close())}function f(o){u=o,e(0,u)}function $(o){r=o,e(1,r)}return s.$$set=o=>{"data"in o&&e(3,a=o.data)},s.$$.update=()=>{s.$$.dirty&8},[u,r,z,a,f,$]}class qe extends ne{constructor(t){super(),se(this,t,we,ve,re,{data:3})}}export{qe as component,Oe as universal};
