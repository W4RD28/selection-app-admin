import{r as re}from"../chunks/index.ade5cbd2.js";import{S as ue,i as ie,s as me,w as ee,a1 as te,a as E,k as z,y as b,a0 as fe,h as i,c as I,l as J,m as L,z as h,n as M,b as q,A as v,G as c,a2 as ne,g as w,d as k,B as P,q as O,r as B,u as $e}from"../chunks/index.6c4b92a0.js";import{a as ce}from"../chunks/navigation.2d7902d0.js";import"../chunks/Indicator.svelte_svelte_type_style_lang.880982d3.js";import{H as de,B as ae}from"../chunks/Heading.24a0ab99.js";import{L as se,I as pe}from"../chunks/Input.9594bbd1.js";import{T as _e}from"../chunks/Textarea.109c781b.js";import{A as ge}from"../chunks/A.ad84c374.js";import{P as be}from"../chunks/P.dfcfc9c9.js";const he=async({parent:o,params:n})=>{const{supabase:t,session:e}=await o();if(!e)throw re(303,"/admin/login");const{data:s}=await t.from("users").select("*").eq("id",e.user.id).single();(s==null?void 0:s.role)!="admin"&&await t.auth.signOut();const{slug:u}=n,{data:f}=await t.from("announcement").select("*").eq("id",u).single();return{adminData:s,announcementData:f}},Je=Object.freeze(Object.defineProperty({__proto__:null,load:he},Symbol.toStringTag,{value:"Module"}));function ve(o){let n;return{c(){n=O("Kembali ke dashboard pengumuman")},l(t){n=B(t,"Kembali ke dashboard pengumuman")},m(t,e){q(t,n,e)},d(t){t&&i(n)}}}function we(o){let n,t;return n=new be({props:{color:"blue",$$slots:{default:[ve]},$$scope:{ctx:o}}}),{c(){b(n.$$.fragment)},l(e){h(n.$$.fragment,e)},m(e,s){v(n,e,s),t=!0},p(e,s){const u={};s&64&&(u.$$scope={dirty:s,ctx:e}),n.$set(u)},i(e){t||(w(n.$$.fragment,e),t=!0)},o(e){k(n.$$.fragment,e),t=!1},d(e){P(n,e)}}}function ke(o){let n,t=o[0].title+"",e;return{c(){n=O("Detail Pengumuman "),e=O(t)},l(s){n=B(s,"Detail Pengumuman "),e=B(s,t)},m(s,u){q(s,n,u),q(s,e,u)},p(s,u){u&1&&t!==(t=s[0].title+"")&&$e(e,t)},d(s){s&&i(n),s&&i(e)}}}function Pe(o){let n;return{c(){n=O("Judul")},l(t){n=B(t,"Judul")},m(t,e){q(t,n,e)},d(t){t&&i(n)}}}function qe(o){let n;return{c(){n=O("Konten")},l(t){n=B(t,"Konten")},m(t,e){q(t,n,e)},d(t){t&&i(n)}}}function De(o){let n;return{c(){n=O("Simpan")},l(t){n=B(t,"Simpan")},m(t,e){q(t,n,e)},d(t){t&&i(n)}}}function Se(o){let n;return{c(){n=O("Hapus")},l(t){n=B(t,"Hapus")},m(t,e){q(t,n,e)},d(t){t&&i(n)}}}function Ae(o){let n,t,e,s,u,f,T,$,r,D,C,d,F,G,S,A,R,p,N,Q,_,U,g,V;document.title=n="Detail Pengumuman "+o[0].title,s=new ge({props:{class:"mb-3 mt-6",href:"/dashboard/announcements",$$slots:{default:[we]},$$scope:{ctx:o}}}),f=new de({props:{tag:"h3",class:"mb-6",$$slots:{default:[ke]},$$scope:{ctx:o}}}),D=new se({props:{for:"judul",class:"mb-2",$$slots:{default:[Pe]},$$scope:{ctx:o}}});function oe(a){o[4](a)}let W={id:"judul"};o[0].title!==void 0&&(W.value=o[0].title),d=new pe({props:W}),ee.push(()=>te(d,"value",oe)),A=new se({props:{for:"konten",class:"mb-2",$$slots:{default:[qe]},$$scope:{ctx:o}}});function le(a){o[5](a)}let X={rows:"15",id:"konten"};return o[0].content!==void 0&&(X.value=o[0].content),p=new _e({props:X}),ee.push(()=>te(p,"value",le)),_=new ae({props:{class:"mb-6",color:"blue",$$slots:{default:[De]},$$scope:{ctx:o}}}),_.$on("click",o[1]),g=new ae({props:{class:"mb-6",color:"red",$$slots:{default:[Se]},$$scope:{ctx:o}}}),g.$on("click",o[2]),{c(){t=E(),e=z("form"),b(s.$$.fragment),u=E(),b(f.$$.fragment),T=E(),$=z("div"),r=z("div"),b(D.$$.fragment),C=E(),b(d.$$.fragment),G=E(),S=z("div"),b(A.$$.fragment),R=E(),b(p.$$.fragment),Q=E(),b(_.$$.fragment),U=E(),b(g.$$.fragment),this.h()},l(a){fe("svelte-1waopdy",document.head).forEach(i),t=I(a),e=J(a,"FORM",{class:!0});var m=L(e);h(s.$$.fragment,m),u=I(m),h(f.$$.fragment,m),T=I(m),$=J(m,"DIV",{class:!0});var j=L($);r=J(j,"DIV",{class:!0});var H=L(r);h(D.$$.fragment,H),C=I(H),h(d.$$.fragment,H),H.forEach(i),G=I(j),S=J(j,"DIV",{class:!0});var K=L(S);h(A.$$.fragment,K),R=I(K),h(p.$$.fragment,K),K.forEach(i),j.forEach(i),Q=I(m),h(_.$$.fragment,m),U=I(m),h(g.$$.fragment,m),m.forEach(i),this.h()},h(){M(r,"class","mb-3"),M(S,"class","mb-3"),M($,"class","grid mb-6"),M(e,"class","ml-10 w-3/4")},m(a,l){q(a,t,l),q(a,e,l),v(s,e,null),c(e,u),v(f,e,null),c(e,T),c(e,$),c($,r),v(D,r,null),c(r,C),v(d,r,null),c($,G),c($,S),v(A,S,null),c(S,R),v(p,S,null),c(e,Q),v(_,e,null),c(e,U),v(g,e,null),V=!0},p(a,[l]){(!V||l&1)&&n!==(n="Detail Pengumuman "+a[0].title)&&(document.title=n);const m={};l&64&&(m.$$scope={dirty:l,ctx:a}),s.$set(m);const j={};l&65&&(j.$$scope={dirty:l,ctx:a}),f.$set(j);const H={};l&64&&(H.$$scope={dirty:l,ctx:a}),D.$set(H);const K={};!F&&l&1&&(F=!0,K.value=a[0].title,ne(()=>F=!1)),d.$set(K);const Y={};l&64&&(Y.$$scope={dirty:l,ctx:a}),A.$set(Y);const Z={};!N&&l&1&&(N=!0,Z.value=a[0].content,ne(()=>N=!1)),p.$set(Z);const y={};l&64&&(y.$$scope={dirty:l,ctx:a}),_.$set(y);const x={};l&64&&(x.$$scope={dirty:l,ctx:a}),g.$set(x)},i(a){V||(w(s.$$.fragment,a),w(f.$$.fragment,a),w(D.$$.fragment,a),w(d.$$.fragment,a),w(A.$$.fragment,a),w(p.$$.fragment,a),w(_.$$.fragment,a),w(g.$$.fragment,a),V=!0)},o(a){k(s.$$.fragment,a),k(f.$$.fragment,a),k(D.$$.fragment,a),k(d.$$.fragment,a),k(A.$$.fragment,a),k(p.$$.fragment,a),k(_.$$.fragment,a),k(g.$$.fragment,a),V=!1},d(a){a&&i(t),a&&i(e),P(s),P(f),P(D),P(d),P(A),P(p),P(_),P(g)}}}function Ee(o,n,t){let e,{data:s}=n;async function u(){await s.supabase.from("announcement").update({title:e.title,content:e.content}).eq("id",e.id),alert("Pengumuman berhasil diubah!"),ce()}async function f(){await s.supabase.from("announcement").delete().eq("id",e.id),alert("Pengumuman berhasil dihapus!"),window.close()}function T(r){o.$$.not_equal(e.title,r)&&(e.title=r,t(0,e),t(3,s))}function $(r){o.$$.not_equal(e.content,r)&&(e.content=r,t(0,e),t(3,s))}return o.$$set=r=>{"data"in r&&t(3,s=r.data)},o.$$.update=()=>{o.$$.dirty&8&&t(0,{announcementData:e}=s,e)},[e,u,f,s,T,$]}class Le extends ue{constructor(n){super(),ie(this,n,Ee,Ae,me,{data:3})}}export{Le as component,Je as universal};
